"use strict";(self["webpackChunkfront_e_commerce"]=self["webpackChunkfront_e_commerce"]||[]).push([[964],{9614:(e,r,t)=>{t.r(r),t.d(r,{default:()=>Se});t(6918),t(2008),t(8980),t(4423),t(4554),t(3288),t(6099),t(7495),t(8781),t(1699),t(5440);var o=t(641),a=t(3751),n=t(33),l=t(953),s=(t(1629),t(3418),t(3609),t(2010),t(9432),t(7764),t(3500),t(4335)),c=t(8465),u=t.n(c),i=t(6278),d=(0,o.Lk)("h3",{class:"text-center text-lg font-semibold mb-4"},"Agregar nuevo producto",-1),p={class:"relative z-0 w-full mb-5 group"},f=(0,o.Lk)("label",{for:"codigo",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Codigo",-1),b={key:0,class:"text-red-500 text-xs italic"},g={class:"relative z-0 w-full mb-5 group"},k=(0,o.Lk)("label",{for:"nombre",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Nombre",-1),x={key:0,class:"text-red-500 text-xs italic"},y={class:"relative z-0 w-full mb-5 group"},m=(0,o.Lk)("label",{for:"precio",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Precio",-1),h={key:0,class:"text-red-500 text-xs italic"},v={class:"relative z-0 w-full mb-5 group"},w=(0,o.Lk)("label",{for:"categoria",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Categoria",-1),L={key:0,class:"text-red-500 text-xs italic"},C={class:"relative z-0 w-full mb-5 group"},E=(0,o.Lk)("label",{for:"stock",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Stock",-1),_={key:0,class:"text-red-500 text-xs italic"},z={class:"relative z-0 w-full mb-5 group"},X=(0,o.Lk)("label",{for:"fotos",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Fotos",-1),j={key:0,class:"text-red-500 text-xs italic"},A={key:1,class:"my-2"},Q={class:"list-disc list-inside text-sm"},S=["onClick"],V=(0,o.Lk)("div",{class:"relative z-0 w-full mb-5 group"},[(0,o.Lk)("button",{class:"w-full sm:w-auto px-5 py-2.5 text-sm font-medium text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"submit"},"Agregar")],-1);const K={__name:"CreatedView",emits:["cancel-create","product-updated"],setup:function(e,r){var t=r.emit,c=t,K=(0,l.Kh)({codigo:"",nombre:"",precio:"",stock:"",categoria:"",fotos:[]}),P=(0,l.KR)([]),B=((0,l.Kh)({}),(0,l.Kh)({})),U=(0,l.KR)(""),I=(0,i.Pj)(),J=(0,o.EW)((function(){return I.state.token})),F=function(e){K.fotos=Array.from(e.target.files)},R=function(){if(Object.keys(B).forEach((function(e){return B[e]=""})),U.value="",!(K.fotos.length>4)){var e=new FormData;e.append("codigo",K.codigo),e.append("nombre",K.nombre),e.append("precio",K.precio),e.append("stock",K.stock),e.append("categoria",K.categoria);for(var r=0;r<K.fotos.length;r++)e.append("fotos",K.fotos[r]);console.log(J.value),s.A.post("new-product",e,{headers:{"Content-Type":"multipart/form-data",token:"".concat(J.value)},withCredentials:!0}).then((function(e){P.value.unshift(e.data),c("product-created"),u().fire("Creado!","El producto ha sido creado.","success"),K.codigo="",K.nombre="",K.precio="",K.stock="",K.categoria="",K.fotos=[]}))["catch"]((function(e){console.log(e),e.response&&e.response.data&&e.response.data.errors?(Object.assign(B,e.response.data.errors),U.value=e.response.data.mensaje||"Errores de validación"):U.value="Error al agregar el producto"}))}},T=function(e){K.fotos.splice(e,1)},M=function(){c("cancel-create")};return function(e,r){return(0,o.uX)(),(0,o.CE)("form",{onSubmit:r[5]||(r[5]=(0,a.D$)((function(e){return R(K)}),["prevent"])),class:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md"},[d,(0,o.Lk)("div",p,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"codigo",placeholder:" ",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-black dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer","onUpdate:modelValue":r[0]||(r[0]=function(e){return K.codigo=e})},null,512),[[a.Jo,K.codigo]]),f,B.codigo?((0,o.uX)(),(0,o.CE)("small",b,(0,n.v_)(B.codigo),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",g,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"nombre",placeholder:" ",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-black dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer","onUpdate:modelValue":r[1]||(r[1]=function(e){return K.nombre=e})},null,512),[[a.Jo,K.nombre]]),k,B.nombre?((0,o.uX)(),(0,o.CE)("small",x,(0,n.v_)(B.nombre),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",y,[(0,o.bo)((0,o.Lk)("input",{type:"number",id:"precio",placeholder:" ",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-black dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer","onUpdate:modelValue":r[2]||(r[2]=function(e){return K.precio=e})},null,512),[[a.Jo,K.precio]]),m,B.precio?((0,o.uX)(),(0,o.CE)("small",h,(0,n.v_)(B.precio),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",v,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"categoria",placeholder:" ",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-black dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer","onUpdate:modelValue":r[3]||(r[3]=function(e){return K.categoria=e})},null,512),[[a.Jo,K.categoria]]),w,B.categoria?((0,o.uX)(),(0,o.CE)("small",L,(0,n.v_)(B.categoria),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",C,[(0,o.bo)((0,o.Lk)("input",{type:"number",id:"stock",placeholder:" ",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-black dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer","onUpdate:modelValue":r[4]||(r[4]=function(e){return K.stock=e})},null,512),[[a.Jo,K.stock]]),E,B.stock?((0,o.uX)(),(0,o.CE)("small",_,(0,n.v_)(B.stock),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",z,[(0,o.Lk)("input",{type:"file",multiple:"",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-black dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer",onChange:F,accept:"image/*"},null,32),X,K.fotos.length>4?((0,o.uX)(),(0,o.CE)("small",j," Solo se pueden subir un máximo de 4 fotos. ")):(0,o.Q3)("",!0),K.fotos.length>0?((0,o.uX)(),(0,o.CE)("small",A,[(0,o.Lk)("ul",Q,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(K.fotos,(function(e,r){return(0,o.uX)(),(0,o.CE)("li",{key:r,class:"flex justify-between items-center"},[(0,o.eW)((0,n.v_)(e.name)+" ",1),(0,o.Lk)("button",{type:"button",onClick:function(e){return T(r)},class:"text-red-500 hover:underline"},"Eliminar",8,S)])})),128))])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",{class:"grid md:grid-cols-2 md:gap-6"},[V,(0,o.Lk)("div",{class:"relative z-0 w-full mb-5 group"},[(0,o.Lk)("button",{class:"w-full sm:w-auto px-5 py-2.5 text-sm font-medium text-white bg-gray-700 hover:bg-gray-800 focus:ring-4 focus:outline-none focus:ring-gray-300 rounded-lg dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800",type:"button",onClick:M},"Cancelar")])])],32)}}},P=K,B=P;var U=(0,o.Lk)("h3",{class:"text-center text-lg font-semibold mb-4"},"Editar Producto",-1),I={key:0,class:"text-red-500 text-sm mb-2 block"},J={class:"relative z-0 w-full mb-5 group"},F=(0,o.Lk)("label",{for:"nombre",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Nombre",-1),R={key:0,class:"text-red-500 text-xs italic"},T={class:"relative z-0 w-full mb-5 group"},M=(0,o.Lk)("label",{for:"precio",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Precio",-1),O={key:0,class:"text-red-500 text-xs italic"},D={class:"relative z-0 w-full mb-5 group"},W=(0,o.Lk)("label",{for:"categoria",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Categoria",-1),H={key:0,class:"text-red-500 text-xs italic"},N={class:"relative z-0 w-full mb-5 group"},$=(0,o.Lk)("label",{for:"stock",class:"peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Stock",-1),q={key:0,class:"text-red-500 text-xs italic"},G=(0,o.Lk)("div",{class:"relative z-0 w-full mb-5 group"},[(0,o.Lk)("button",{class:"w-full sm:w-auto px-5 py-2.5 text-sm font-medium text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"submit"},"Editar")],-1);const Y={__name:"UpdateView",props:{id:String},emits:["cancel-update","product-updated"],setup:function(e,r){var t=r.emit,c=e,d=t,p=(0,l.Kh)({}),f=(0,l.Kh)({}),b=(0,l.KR)(""),g=(0,i.Pj)(),k=g.state.token,x=function(e){s.A.get("product/".concat(e)).then((function(e){Object.assign(p,e.data)}))["catch"]((function(e){console.log(e.response)}))},y=function(e){Object.keys(f).forEach((function(e){return f[e]=""})),b.value="",s.A.put("product/".concat(e._id),e,{headers:{"Content-Type":"multipart/form-data",token:"".concat(k)},withCredentials:!0}).then((function(e){d("product-updated"),u().fire("Actualizado!","El producto ha sido actualizado.","success")}))["catch"]((function(e){e.response&&e.response.data&&e.response.data.errors?(Object.assign(f,e.response.data.errors),b.value=e.response.data.mensaje||"Errores de validación"):b.value="Error al actualizar el producto"}))},m=function(){d("cancel-update")};return(0,o.sV)((function(){c.id&&x(c.id)})),function(e,r){return(0,o.uX)(),(0,o.CE)("form",{onSubmit:r[4]||(r[4]=(0,a.D$)((function(e){return y(p)}),["prevent"])),class:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md"},[U,b.value?((0,o.uX)(),(0,o.CE)("small",I,(0,n.v_)(b.value),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",J,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"nombre",placeholder:" ",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-black dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer","onUpdate:modelValue":r[0]||(r[0]=function(e){return p.nombre=e})},null,512),[[a.Jo,p.nombre]]),F,f.nombre?((0,o.uX)(),(0,o.CE)("small",R,(0,n.v_)(f.nombre),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",T,[(0,o.bo)((0,o.Lk)("input",{type:"number",id:"precio",placeholder:" ",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-black dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer","onUpdate:modelValue":r[1]||(r[1]=function(e){return p.precio=e})},null,512),[[a.Jo,p.precio]]),M,f.precio?((0,o.uX)(),(0,o.CE)("small",O,(0,n.v_)(f.precio),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",D,[(0,o.bo)((0,o.Lk)("input",{type:"text",id:"categoria",placeholder:" ",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-black dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer","onUpdate:modelValue":r[2]||(r[2]=function(e){return p.categoria=e})},null,512),[[a.Jo,p.categoria]]),W,f.categoria?((0,o.uX)(),(0,o.CE)("small",H,(0,n.v_)(f.categoria),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",N,[(0,o.bo)((0,o.Lk)("input",{type:"number",id:"stock",placeholder:" ",class:"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none dark:text-black dark:border-gray-600 dark:focus:border-blue-500 focus:outline-none focus:ring-0 focus:border-blue-600 peer","onUpdate:modelValue":r[3]||(r[3]=function(e){return p.stock=e})},null,512),[[a.Jo,p.stock]]),$,f.stock?((0,o.uX)(),(0,o.CE)("small",q,(0,n.v_)(f.stock),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",{class:"grid md:grid-cols-2 md:gap-6"},[G,(0,o.Lk)("div",{class:"relative z-0 w-full mb-5 group"},[(0,o.Lk)("button",{class:"w-full sm:w-auto px-5 py-2.5 text-sm font-medium text-white bg-gray-700 hover:bg-gray-800 focus:ring-4 focus:outline-none focus:ring-gray-300 rounded-lg dark:bg-gray-600 dark:hover:bg-gray-700 dark:focus:ring-gray-800",type:"button",onClick:m},"Cancelar")])])],32)}}},Z=Y,ee=Z;var re={class:"product p-6 m-4 rounded-lg shadow-md bg-gray-50"},te={class:"flex items-center space-x-4 mb-4"},oe={key:1,for:"buscar"},ae={class:"overflow-x-auto"},ne={class:"table-auto w-full text-sm text-left rtl:text-right text-gray-700"},le=(0,o.Lk)("thead",{class:"text-xs uppercase bg-gray-100 dark:bg-gray-700 dark:text-gray-400"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{scope:"col",class:"px-2 py-3"},"Codigo"),(0,o.Lk)("th",{scope:"col",class:"px-2 py-3"},"Nombre"),(0,o.Lk)("th",{scope:"col",class:"px-2 py-3"},"Precio"),(0,o.Lk)("th",{scope:"col",class:"px-2 py-3"},"Stock"),(0,o.Lk)("th",{scope:"col",class:"px-2 py-3"},"Categoria"),(0,o.Lk)("th",{scope:"col",class:"px-2 py-3"},"Creado"),(0,o.Lk)("th",{scope:"col",class:"px-2 py-3"},"Fotos"),(0,o.Lk)("th",{scope:"col",class:"px-2 py-3"},"Acciones")])],-1),se={class:"px-2 py-4 font-medium text-gray-900 whitespace-nowrap text-gray-950 dark:text-gray-800"},ce={class:"px-2 py-4 text-gray-950 dark:text-gray-800"},ue={class:"max-w-[200px] overflow-hidden whitespace-nowrap text-ellipsis px-2 text-left"},ie={class:"px-2 py-4 text-gray-950 dark:text-gray-800"},de={class:"px-2 py-4 text-gray-950 dark:text-gray-800"},pe={class:"px-2 py-4 text-gray-950 dark:text-gray-800"},fe={class:"px-2 py-4 text-gray-950 dark:text-gray-800"},be={class:"px-2 py-2"},ge={class:"mb-2"},ke=["src"],xe={class:"px-2 py-4 flex flex-wrap space-x-1"},ye=["onClick"],me=(0,o.Fv)('<svg class="h-6 w-6 text-green-600" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"></path><path d="M9 7 h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3"></path><path d="M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3"></path><line x1="16" y1="5" x2="19" y2="8"></line></svg>',1),he=[me],ve=["onClick"],we=(0,o.Fv)('<svg class="h-6 w-6 text-red-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>',1),Le=[we],Ce=["onClick"],Ee=(0,o.Lk)("svg",{class:"h-6 w-6 text-green-600",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[(0,o.Lk)("path",{stroke:"none",d:"M0 0h24v24H0z"}),(0,o.Lk)("circle",{cx:"12",cy:"12",r:"9"}),(0,o.Lk)("path",{d:"M9 12l2 2l4 -4"})],-1),_e=[Ee],ze=["onClick"],Xe=(0,o.Lk)("svg",{class:"h-6 w-6 text-red-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,o.Lk)("circle",{cx:"12",cy:"12",r:"10"}),(0,o.Lk)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,o.Lk)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})],-1),je=[Xe];const Ae={__name:"ProductsView",setup:function(e){var r=(0,l.KR)(null),t=(0,l.KR)([]),c=(0,l.KR)(!1),d=(0,l.KR)(!1),p=(0,l.KR)(""),f=(0,i.Pj)(),b=(0,o.EW)((function(){return f.state.token})),g=function(){var e={headers:{token:"".concat(b.value)}};s.A.get("/product",e).then((function(e){t.value=e.data}))["catch"]((function(e){console.log("Error: "+e)}))},k=function(e){u().fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminarlo!"}).then((function(r){r.isConfirmed&&s.A["delete"]("product/".concat(e),{headers:{token:"".concat(b.value)},withCredentials:!0}).then((function(e){var r=t.value.findIndex((function(r){return r._id===e.data._id}));-1!==r&&t.value.splice(r,1),g(),u().fire("Eliminado!","El producto ha sido eliminado.","success")}))["catch"]((function(e){console.log(e.response),u().fire("Error!","Hubo un problema eliminando el producto.","error")}))}))},x=function(e){var r=!e.activo,t={activo:r};s.A.patch("product/".concat(e._id),t,{headers:{"Content-Type":"application/json",token:"".concat(b.value)},withCredentials:!0}).then((function(e){var r;t.activo?u().fire({title:"Activando!",showConfirmButton:!1,icon:"success",timer:1500,willClose:function(){clearInterval(r)}}):u().fire({title:"Desactivando!",showConfirmButton:!1,icon:"error",timer:1500,willClose:function(){clearInterval(r)}}),g()}))["catch"]((function(e){e.response&&e.response.data&&e.response.data.errors?(Object.assign(validationErrors,e.response.data.errors),generalError.value=e.response.data.mensaje||"Errores de validación"):generalError.value="Error al actualizar el producto"}))},y=function(e){r.value=e,d.value=!1,c.value=!0},m=function(){c.value=!1,d.value=!0},h=function(){c.value=!1},v=function(){d.value=!1},w=function(){c.value=!1,g()},L=function(){g()},C=function(e){return"/".concat(e)},E=(0,o.EW)((function(){var e=p.value.toLowerCase();return t.value.filter((function(r){return r.codigo.toLowerCase().includes(e)||r.nombre.toLowerCase().includes(e)||r.precio.toString().includes(e)||r.categoria.toLowerCase().includes(e)||r.activo.toString().toLowerCase().includes(e)}))})),_=function(e){var r={year:"numeric",month:"2-digit",day:"2-digit"};return new Date(e).toLocaleDateString(void 0,r)};return(0,o.sV)((function(){g()})),function(e,t){return(0,o.uX)(),(0,o.CE)("div",re,[d.value?((0,o.uX)(),(0,o.Wv)(B,{key:0,onCancelCreate:v,onProductCreated:L,class:"mb-4"})):(0,o.Q3)("",!0),c.value?((0,o.uX)(),(0,o.Wv)(ee,{key:1,onCancelUpdate:h,onProductUpdated:w,id:r.value,class:"mb-4"},null,8,["id"])):(0,o.Q3)("",!0),(0,o.Lk)("div",te,[d.value?(0,o.Q3)("",!0):(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:0,type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return p.value=e}),placeholder:"Buscar...",class:"w-full sm:w-auto px-4 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-blue-600 focus:outline-none",onInput:t[1]||(t[1]=function(){return e.searchProducts&&e.searchProducts.apply(e,arguments)})},null,544)),[[a.Jo,p.value]]),d.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("label",oe,"Buscar")),d.value||c.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:2,class:"px-5 py-2.5 text-sm font-medium text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:m},"Crear Producto"))]),(0,o.Lk)("div",ae,[(0,o.Lk)("table",ne,[le,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(E.value,(function(e){return(0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b dark:border-gray-700"},[(0,o.Lk)("td",se,(0,n.v_)(e.codigo),1),(0,o.Lk)("td",ce,[(0,o.Lk)("div",ue,(0,n.v_)(e.nombre),1)]),(0,o.Lk)("td",ie,"$"+(0,n.v_)(e.precio.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")),1),(0,o.Lk)("td",de,(0,n.v_)(e.stock),1),(0,o.Lk)("td",pe,(0,n.v_)(e.categoria),1),(0,o.Lk)("td",fe,(0,n.v_)(_(e.date)),1),(0,o.Lk)("td",be,[(0,o.Lk)("div",ge,[(0,o.Lk)("img",{src:C(e.fotos[0]),alt:"Foto de producto",class:"h-10 w-10 object-cover rounded-md"},null,8,ke)])]),(0,o.Lk)("td",xe,[(0,o.Lk)("button",{onClick:function(r){return y(e._id)},title:"Editar"},he,8,ye),(0,o.Lk)("button",{onClick:function(r){return k(e._id)},title:"Eliminar"},Le,8,ve),e.activo?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:function(r){return x(e)},title:"Inactivar"},_e,8,Ce)):(0,o.Q3)("",!0),e.activo?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:function(r){return x(e)},title:"Activar"},je,8,ze))])])})),128))])])])])}}},Qe=Ae,Se=Qe},1436:(e,r,t)=>{var o=t(8227),a=o("match");e.exports=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[a]=!1,"/./"[e](r)}catch(o){}}return!1}},4606:(e,r,t)=>{var o=t(6823),a=TypeError;e.exports=function(e,r){if(!delete e[r])throw new a("Cannot delete property "+o(r)+" of "+o(e))}},788:(e,r,t)=>{var o=t(34),a=t(4576),n=t(8227),l=n("match");e.exports=function(e){var r;return o(e)&&(void 0!==(r=e[l])?!!r:"RegExp"===a(e))}},5749:(e,r,t)=>{var o=t(788),a=TypeError;e.exports=function(e){if(o(e))throw new a("The method doesn't accept regular expressions");return e}},8980:(e,r,t)=>{var o=t(6518),a=t(9213).findIndex,n=t(6469),l="findIndex",s=!0;l in[]&&Array(1)[l]((function(){s=!1})),o({target:"Array",proto:!0,forced:s},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),n(l)},4423:(e,r,t)=>{var o=t(6518),a=t(9617).includes,n=t(9039),l=t(6469),s=n((function(){return!Array(1).includes()}));o({target:"Array",proto:!0,forced:s},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),l("includes")},4554:(e,r,t)=>{var o=t(6518),a=t(8981),n=t(5610),l=t(1291),s=t(6198),c=t(4527),u=t(6837),i=t(1469),d=t(4659),p=t(4606),f=t(597),b=f("splice"),g=Math.max,k=Math.min;o({target:"Array",proto:!0,forced:!b},{splice:function(e,r){var t,o,f,b,x,y,m=a(this),h=s(m),v=n(e,h),w=arguments.length;for(0===w?t=o=0:1===w?(t=0,o=h-v):(t=w-2,o=k(g(l(r),0),h-v)),u(h+t-o),f=i(m,o),b=0;b<o;b++)x=v+b,x in m&&d(f,b,m[x]);if(f.length=o,t<o){for(b=v;b<h-o;b++)x=b+o,y=b+t,x in m?m[y]=m[x]:p(m,y);for(b=h;b>h-o+t;b--)p(m,b-1)}else if(t>o)for(b=h-o;b>v;b--)x=b+o-1,y=b+t-1,x in m?m[y]=m[x]:p(m,y);for(b=0;b<t;b++)m[b+v]=arguments[b+2];return c(m,h-o+t),f}})},3609:(e,r,t)=>{var o=t(6518),a=t(8981),n=t(6198),l=t(4527),s=t(4606),c=t(6837),u=1!==[].unshift(0),i=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},d=u||!i();o({target:"Array",proto:!0,arity:1,forced:d},{unshift:function(e){var r=a(this),t=n(r),o=arguments.length;if(o){c(t+o);var u=t;while(u--){var i=u+o;u in r?r[i]=r[u]:s(r,i)}for(var d=0;d<o;d++)r[d]=arguments[d]}return l(r,t+o)}})},2010:(e,r,t)=>{var o=t(3724),a=t(350).EXISTS,n=t(9504),l=t(2106),s=Function.prototype,c=n(s.toString),u=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=n(u.exec),d="name";o&&!a&&l(s,d,{configurable:!0,get:function(){try{return i(u,c(this))[1]}catch(e){return""}}})},1699:(e,r,t)=>{var o=t(6518),a=t(9504),n=t(5749),l=t(7750),s=t(655),c=t(1436),u=a("".indexOf);o({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(s(l(this)),s(n(e)),arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=product.6c714a26.js.map